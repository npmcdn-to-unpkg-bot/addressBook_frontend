<!DOCTYPE html>
<html lang="ru" ng-app="addressBookApp">
<head>
    <meta charset="UTF-8">
    <meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
    <title>Address book project</title>
    <link rel="stylesheet" type="text/css" href="app/components/bootstrap-3.3.7/css/bootstrap.min.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="app/components/font-awesome-4.6.3/css/font-awesome.min.css">

    <script src="app/js/libs/angular.js"></script>
    <script src="app/js/libs/ui-bootstrap-tpls.min.js"></script>
    <script src="app/js/app.js"></script>
    <script src="app/js/controllers/AddressListCtrl.js"></script>
    <script src="app/js/services/DataService.js"></script>
    <script src="app/js/filters/filters.js"></script>

</head>
<body>
<div class="container-fixed">
    <div class="row">
        <div class="col-lg-2 col-md-1">
        </div>
        <div class="col-lg-8 col-md-10">
            <div class="text-center">
                <h1>Редактор адресов</h1>
            </div>
        </div>
        <div class="col-lg-2 col-md-1">
        </div>
    </div>
</div>
<div class="container-fixed" id="table" ng-controller="AddressListCtrl">
    <div class="row" ng-show="dataLoading">
        <div class="col-lg-2">
        </div>
        <div class="col-lg-8 text-center ">
            <h3>Загрузка данных... <i class="fa fa-spinner fa-spin" style="font-size:24px"></i></h3>
        </div>
        <div class="col-lg-2">
        </div>
    </div>
    <table class="table table-bordered table-striped">
        <thead>
        <!-- Add Order filter event (trigger is clicking onto the head) and images for filter status-->

        <tr>
            <th ng-click="sortType = 'country'; sortReverse = !sortReverse">
                Страна
                <span ng-show="sortType == 'country' && !sortReverse"
                      class="glyphicon glyphicon-arrow-down"></span>
                <span ng-show="sortType == 'country' && sortReverse"
                      class="glyphicon glyphicon-arrow-up"></span>
                <span ng-show="filterStatus.country"
                      class="glyphicon glyphicon-filter"></span></a>
            </th>
            <th ng-click="sortType = 'city'; sortReverse = !sortReverse">
                Город
                <span ng-show="sortType == 'city' && !sortReverse"
                      class="glyphicon glyphicon-arrow-down"></span>
                <span ng-show="sortType == 'city' && sortReverse"
                      class="glyphicon glyphicon-arrow-up"></span>
                <span ng-show="filterStatus.city"
                      class="glyphicon glyphicon-filter"></span>
            </th>
            <th ng-click="sortType = 'street'; sortReverse = !sortReverse">
                Улица
                <span ng-show="sortType == 'street' && !sortReverse"
                      class="glyphicon glyphicon-arrow-down"></span>
                <span ng-show="sortType == 'street' && sortReverse"
                      class="glyphicon glyphicon-arrow-up"></span>
                <span ng-show="filterStatus.street"
                      class="glyphicon glyphicon-filter"></span>

            </th>
            <th ng-click="sortType = 'house'; sortReverse = !sortReverse">
                Дом
                <span ng-show="sortType == 'house' && !sortReverse"
                      class="glyphicon glyphicon-arrow-down"></span>
                <span ng-show="sortType == 'house' && sortReverse"
                      class="glyphicon glyphicon-arrow-up"></span>
                <span ng-show="filterStatus.house"
                      class="glyphicon glyphicon-filter"></span>
            </th>
            <th ng-click="sortType = 'postcode'; sortReverse = !sortReverse">
                Индекс
                <span ng-show="sortType == 'postcode' && !sortReverse"
                      class="glyphicon glyphicon-arrow-down"></span>
                <span ng-show="sortType == 'postcode' && sortReverse"
                      class="glyphicon glyphicon-arrow-up"></span>
                <span ng-show="filterStatus.postcode"
                      class="glyphicon glyphicon-filter"></span>
            </th>
            <th ng-click="sortType = 'date'; sortReverse = !sortReverse">
                Дата
                <span ng-show="sortType == 'date' && !sortReverse"
                      class="glyphicon glyphicon-arrow-down"></span>
                <span ng-show="sortType == 'date' && sortReverse"
                      class="glyphicon glyphicon-arrow-up"></span>
                <span ng-show="filterStatus.date"
                      class="glyphicon glyphicon-filter"></span>
            </th>
        </tr>

        <!-- Add Search filter for columns-->
        <tr>
            <td>
                <input type="text" placeholder="поиск"
                       ng-change="filter.country()"
                       ng-model="search.country">
            </td>
            <td>
                <input type="text" placeholder="поиск"
                       ng-change="filter.city()"
                       ng-model="search.city"
                       ng-pattern="regexSet.city">
            </td>
            <td>
                <input type="text" placeholder="поиск"
                       ng-model="search.street"
                       ng-change="filter.street()">
            </td>
            <td>
                <input type="text" placeholder="поиск"
                       ng-model="search.house"
                       ng-change="filter.house()">

            </td>
            <td>
                <input type="text" placeholder="поиск"
                       ng-model="search.postcode"
                       ng-change="filter.postcode()">
            </td>
            <td>
                <input type="text" placeholder="поиск"
                       ng-model="search.date"
                       ng-change="filter.date()">
            </td>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="address in filteredAddresses = (addresses | filter:search:strict) |
		startFrom : ((currentPage - 1)*itemsPerPage) : ((currentPage - 1)*itemsPerPage + itemsPerPage)|
        orderBy:sortType:sortReverse">
            <td>{{address.country}}</td>
            <td>{{address.city}}</td>
            <td>{{address.street}}</td>
            <td>{{address.house}}</td>
            <td>{{address.postcode}}</td>
            <td>{{address.date.date}}</td>
        </tr>
        </tbody>
    </table>
    <div class="container-fixed" id="filterResult">
        <div class="row">
            <div class="col-lg-12 text-left">
                <h1>Всего записей: {{addresses.length}}</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 text-left">
                <h1>Найдено записей: {{filteredAddresses.length}}</h1>
            </div>
        </div>
    </div>

    <div class="container-fixed" id="pagination">
        <div class="row">
            <div class="col-lg-12">
                <div class="text-center">
                    <ul uib-pagination
                        boundary-links="true"
                        total-items="filteredAddresses.length"
                        items-per-page="itemsPerPage"
                        ng-model="currentPage"
                        ng-change="paginationChanged()"
                        max-size="maxSize"
                        previous-text="&lsaquo;"
                        next-text="&rsaquo;"
                        first-text="&laquo;"
                        last-text="&raquo;">
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-fixed" id="footer">
    <div class="row">
        <div class="col-lg-12 text-left">
            <p>Author: Igor Sysoev</p>
        </div>

    </div>
    <div class="row">
        <div class="col-lg-12 text-left">
            <p>Contact information: <a href="mailto:is.sysoev@gmail.com">is.sysoev@gmail.com</a></p>
        </div>
    </div>
</body>
</html>